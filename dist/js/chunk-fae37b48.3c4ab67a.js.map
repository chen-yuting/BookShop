{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.constructor.js","webpack:///./src/views/store/StoreDetail.vue?7679","webpack:///./node_modules/core-js/modules/_fails-is-regexp.js","webpack:///./src/views/store/StoreDetail.vue?bdae","webpack:///./src/views/store/StoreDetail.vue?1263","webpack:///./src/views/store/StoreDetail.vue","webpack:///src/views/store/StoreDetail.vue","webpack:///./node_modules/core-js/modules/_is-regexp.js","webpack:///./node_modules/core-js/modules/_string-context.js","webpack:///./node_modules/core-js/modules/es6.string.starts-with.js"],"names":["global","inheritIfRequired","dP","f","gOPN","isRegExp","$flags","$RegExp","RegExp","Base","proto","prototype","re1","re2","CORRECT_NEW","p","tiRE","this","piRE","fiU","undefined","constructor","source","call","proxy","key","configurable","get","set","it","keys","i","length","MATCH","module","exports","KEY","re","e","render","_vm","_h","$createElement","_c","_self","staticClass","ref","attrs","on","onScroll","cover","title","author","desc","_v","_s","$t","publisher","categoryText","lang","isbn","navigation","_e","_l","item","index","$event","read","class","deep","style","itemStyle","label","displayed","directives","name","rawName","value","expression","stopPropagation","preventDefault","readBook","trialListening","addOrRemoveShelf","inBookShelf","toastText","staticRenderFns","component","ePub","mixins","components","DetailTitle","Scroll","BookInfo","Toast","computed","description","substring","flatNavigation","Array","concat","apply","metadata","language","identifier","creator","bookItem","shelfList","book","data","bookShelf","trialRead","audio","randomLocation","trialText","opf","methods","setShelfList","showToast","text","$refs","toast","show","err","Blob","path","query","fileName","href","marginLeft","doFlatNavigation","content","forEach","arr","push","subitems","initBook","blob","downloadBook","parseBook","loaded","then","init","$route","category","rootFile","startsWith","display","preview","rendition","renderTo","width","window","innerWidth","height","innerHeight","method","location","offsetY","showShadow","hideShadow","mounted","getShelfList","isObject","cof","defined","that","searchString","NAME","TypeError","String","$export","toLength","context","STARTS_WITH","$startsWith","P","F","Math","min","arguments","search","slice"],"mappings":"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","file":"js/chunk-fae37b48.3c4ab67a.js","sourcesContent":["var global = require('./_global');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar dP = require('./_object-dp').f;\nvar gOPN = require('./_object-gopn').f;\nvar isRegExp = require('./_is-regexp');\nvar $flags = require('./_flags');\nvar $RegExp = global.RegExp;\nvar Base = $RegExp;\nvar proto = $RegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n// \"new\" creates a new object, old webkit buggy here\nvar CORRECT_NEW = new $RegExp(re1) !== re1;\n\nif (require('./_descriptors') && (!CORRECT_NEW || require('./_fails')(function () {\n  re2[require('./_wks')('match')] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return $RegExp(re1) != re1 || $RegExp(re2) == re2 || $RegExp(re1, 'i') != '/a/i';\n}))) {\n  $RegExp = function RegExp(p, f) {\n    var tiRE = this instanceof $RegExp;\n    var piRE = isRegExp(p);\n    var fiU = f === undefined;\n    return !tiRE && piRE && p.constructor === $RegExp && fiU ? p\n      : inheritIfRequired(CORRECT_NEW\n        ? new Base(piRE && !fiU ? p.source : p, f)\n        : Base((piRE = p instanceof $RegExp) ? p.source : p, piRE && fiU ? $flags.call(p) : f)\n      , tiRE ? this : proto, $RegExp);\n  };\n  var proxy = function (key) {\n    key in $RegExp || dP($RegExp, key, {\n      configurable: true,\n      get: function () { return Base[key]; },\n      set: function (it) { Base[key] = it; }\n    });\n  };\n  for (var keys = gOPN(Base), i = 0; keys.length > i;) proxy(keys[i++]);\n  proto.constructor = $RegExp;\n  $RegExp.prototype = proto;\n  require('./_redefine')(global, 'RegExp', $RegExp);\n}\n\nrequire('./_set-species')('RegExp');\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=style&index=0&id=5b6e20ae&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=style&index=0&id=5b6e20ae&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"book-detail\"},[_c('detail-title',{ref:\"title\",attrs:{\"showShelf\":true}}),_c('scroll',{ref:\"scroll\",staticClass:\"content-wrapper\",attrs:{\"top\":42,\"bottom\":52},on:{\"onScroll\":_vm.onScroll}},[_c('book-info',{attrs:{\"cover\":_vm.cover,\"title\":_vm.title,\"author\":_vm.author,\"desc\":_vm.desc}}),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"detail.copyright\"))+\"\\n      \")]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"detail.publisher\"))+\"\\n          \")]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.publisher))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"detail.category\"))+\"\\n          \")]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.categoryText))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t(\"detail.lang\")))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.lang))])]),_c('div',{staticClass:\"book-detail-content-row\"},[_c('div',{staticClass:\"book-detail-content-label\"},[_vm._v(_vm._s(_vm.$t(\"detail.ISBN\")))]),_c('div',{staticClass:\"book-detail-content-text\"},[_vm._v(_vm._s(_vm.isbn))])])])]),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(\"\\n        \"+_vm._s(_vm.$t(\"detail.navigation\"))+\"\\n      \")]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.navigation)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t(\"detail.loading\")))])]):_vm._e(),_c('div',{staticClass:\"book-detail-content-item-wrapper\"},_vm._l((_vm.flatNavigation),function(item,index){return _c('div',{key:index,staticClass:\"book-detail-content-item\",on:{\"click\":function($event){return _vm.read(item)}}},[(item.label)?_c('div',{staticClass:\"book-detail-content-navigation-text\",class:{ 'is-sub': item.deep > 1 },style:(_vm.itemStyle(item))},[_vm._v(\"\\n              \"+_vm._s(item.label)+\"\\n            \")]):_vm._e()])}),0)])]),_c('div',{staticClass:\"book-detail-content-wrapper\"},[_c('div',{staticClass:\"book-detail-content-title\"},[_vm._v(_vm._s(_vm.$t(\"detail.trial\")))]),_c('div',{staticClass:\"book-detail-content-list-wrapper\"},[(!this.displayed)?_c('div',{staticClass:\"loading-text-wrapper\"},[_c('span',{staticClass:\"loading-text\"},[_vm._v(_vm._s(_vm.$t(\"detail.loading\")))])]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.displayed),expression:\"this.displayed\"}],ref:\"preview\",attrs:{\"id\":\"preview\"}})])],1),_c('div',{staticClass:\"bottom-wrapper\"},[_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.readBook()}}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t(\"detail.read\"))+\"\\n    \")]),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.trialListening()}}},[_vm._v(\"\\n      \"+_vm._s(_vm.$t(\"detail.listen\"))+\"\\n    \")]),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.addOrRemoveShelf()}}},[(_vm.inBookShelf)?_c('span',{staticClass:\"icon-check\"}):_vm._e(),_vm._v(\"\\n      \"+_vm._s(_vm.inBookShelf\n          ? _vm.$t(\"detail.isAddedToShelf\")\n          : _vm.$t(\"detail.addOrRemoveShelf\"))+\"\\n    \")])]),_c('toast',{ref:\"toast\",attrs:{\"text\":_vm.toastText}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StoreDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./StoreDetail.vue?vue&type=template&id=5b6e20ae&scoped=true&\"\nimport script from \"./StoreDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./StoreDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./StoreDetail.vue?vue&type=style&index=0&id=5b6e20ae&lang=scss&rel=stylesheet%2Fscss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b6e20ae\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"book-detail\">\n    <detail-title :showShelf=\"true\" ref=\"title\"></detail-title>\n    <scroll\n      class=\"content-wrapper\"\n      :top=\"42\"\n      :bottom=\"52\"\n      @onScroll=\"onScroll\"\n      ref=\"scroll\"\n    >\n      <book-info\n        :cover=\"cover\"\n        :title=\"title\"\n        :author=\"author\"\n        :desc=\"desc\"\n      ></book-info>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">\n          {{ $t(\"detail.copyright\") }}\n        </div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">\n              {{ $t(\"detail.publisher\") }}\n            </div>\n            <div class=\"book-detail-content-text\">{{ publisher }}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">\n              {{ $t(\"detail.category\") }}\n            </div>\n            <div class=\"book-detail-content-text\">{{ categoryText }}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{ $t(\"detail.lang\") }}</div>\n            <div class=\"book-detail-content-text\">{{ lang }}</div>\n          </div>\n          <div class=\"book-detail-content-row\">\n            <div class=\"book-detail-content-label\">{{ $t(\"detail.ISBN\") }}</div>\n            <div class=\"book-detail-content-text\">{{ isbn }}</div>\n          </div>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">\n          {{ $t(\"detail.navigation\") }}\n        </div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.navigation\">\n            <span class=\"loading-text\">{{ $t(\"detail.loading\") }}</span>\n          </div>\n          <div class=\"book-detail-content-item-wrapper\">\n            <div\n              class=\"book-detail-content-item\"\n              v-for=\"(item, index) in flatNavigation\"\n              :key=\"index\"\n              @click=\"read(item)\"\n            >\n              <div\n                class=\"book-detail-content-navigation-text\"\n                :class=\"{ 'is-sub': item.deep > 1 }\"\n                :style=\"itemStyle(item)\"\n                v-if=\"item.label\"\n              >\n                {{ item.label }}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"book-detail-content-wrapper\">\n        <div class=\"book-detail-content-title\">{{ $t(\"detail.trial\") }}</div>\n        <div class=\"book-detail-content-list-wrapper\">\n          <div class=\"loading-text-wrapper\" v-if=\"!this.displayed\">\n            <span class=\"loading-text\">{{ $t(\"detail.loading\") }}</span>\n          </div>\n        </div>\n        <div id=\"preview\" v-show=\"this.displayed\" ref=\"preview\"></div>\n      </div>\n    </scroll>\n    <div class=\"bottom-wrapper\">\n      <div class=\"bottom-btn\" @click.stop.prevent=\"readBook()\">\n        {{ $t(\"detail.read\") }}\n      </div>\n      <div class=\"bottom-btn\" @click.stop.prevent=\"trialListening()\">\n        {{ $t(\"detail.listen\") }}\n      </div>\n      <div class=\"bottom-btn\" @click.stop.prevent=\"addOrRemoveShelf()\">\n        <span class=\"icon-check\" v-if=\"inBookShelf\"></span>\n        {{\n          inBookShelf\n            ? $t(\"detail.isAddedToShelf\")\n            : $t(\"detail.addOrRemoveShelf\")\n        }}\n      </div>\n    </div>\n    <toast :text=\"toastText\" ref=\"toast\"></toast>\n  </div>\n</template>\n\n<script type=\"text/ecmascript-6\">\nimport DetailTitle from \"@/components/detail/DetailTitle\";\nimport BookInfo from \"@/components/detail/BookInfo\";\nimport Scroll from \"@/components/common/Scroll\";\nimport Toast from \"@/components/common/Toast\";\nimport { removeFromBookShelf, addToShelf } from \"@/utils/store\";\nimport { detail } from \"@/api/book\";\nimport { px2rem, realPx } from \"@/utils/utils\";\nimport { getLocalForage } from \"@/utils/localForage\";\nimport {\n  getLocalStorage,\n  saveBookShelf,\n  getBookShelf,\n} from \"@/utils/localStorage\";\nimport { storeShelfMixin } from \"../../utils/mixin\";\nimport Epub from \"epubjs\";\n\nglobal.ePub = Epub;\n\nexport default {\n  mixins: [storeShelfMixin],\n  components: {\n    DetailTitle,\n    Scroll,\n    BookInfo,\n    Toast,\n  },\n  computed: {\n    desc() {\n      if (this.description) {\n        return this.description.substring(0, 100);\n      } else {\n        return \"\";\n      }\n    },\n    flatNavigation() {\n      if (this.navigation) {\n        return Array.prototype.concat.apply(\n          [],\n          Array.prototype.concat.apply(\n            [],\n            this.doFlatNavigation(this.navigation.toc)\n          )\n        );\n      } else {\n        return [];\n      }\n    },\n    lang() {\n      return this.metadata ? this.metadata.language : \"-\";\n    },\n    isbn() {\n      return this.metadata ? this.metadata.identifier : \"-\";\n    },\n    publisher() {\n      return this.metadata ? this.metadata.publisher : \"-\";\n    },\n    title() {\n      return this.metadata ? this.metadata.title : \"\";\n    },\n    author() {\n      return this.metadata ? this.metadata.creator : \"\";\n    },\n    inBookShelf() {\n      if (this.bookItem && this.shelfList) {\n        const flatShelf = (function flatten(arr) {\n          return [].concat(\n            ...arr.map((v) => (v.itemList ? [v, ...flatten(v.itemList)] : v))\n          );\n        })(this.shelfList).filter((item) => item.type === 1);\n        const book = flatShelf.filter(\n          (item) => item.fileName === this.bookItem.fileName\n        );\n        return book && book.length > 0;\n      } else {\n        return false;\n      }\n    },\n  },\n  data() {\n    return {\n      bookShelf: null,\n      bookItem: null,\n      book: null,\n      metadata: null,\n      trialRead: null,\n      cover: null,\n      navigation: null,\n      displayed: false,\n      audio: null,\n      randomLocation: null,\n      description: null,\n      toastText: \"\",\n      trialText: null,\n      categoryText: null,\n      opf: null,\n    };\n  },\n  methods: {\n    addOrRemoveShelf() {\n      if (this.inBookShelf) {\n        this.setShelfList(removeFromBookShelf(this.bookItem)).then(() => {\n          saveBookShelf(this.shelfList);\n        });\n      } else {\n        addToShelf(this.bookItem);\n        this.setShelfList(getBookShelf());\n      }\n    },\n    showToast(text) {\n      this.toastText = text;\n      this.$refs.toast.show();\n    },\n    readBook() {\n      getLocalForage(this.bookItem.fileName, (err, value) => {\n        if (!err && value instanceof Blob) {\n          this.$router.push({\n            path: `/ebook/${this.bookItem.categoryText}|${this.bookItem.fileName}`,\n          });\n        } else {\n          // this.showToast(this.$t('shelf.downloadFirst'))\n          this.$router.push({\n            path: `/ebook/${this.bookItem.categoryText}|${this.bookItem.fileName}`,\n            query: {\n              opf: this.opf,\n            },\n          });\n        }\n      });\n    },\n    trialListening() {\n      getLocalForage(this.bookItem.fileName, (err, value) => {\n        if (!err && value instanceof Blob) {\n          this.$router.push({\n            path: \"/store/speaking\",\n            query: {\n              fileName: this.bookItem.fileName,\n            },\n          });\n        } else {\n          // this.showToast(this.$t('shelf.downloadFirst'))\n          this.$router.push({\n            path: \"/store/speaking\",\n            query: {\n              fileName: this.bookItem.fileName,\n              opf: this.opf,\n            },\n          });\n        }\n      });\n    },\n    read(item) {\n      getLocalForage(this.bookItem.fileName, (err, value) => {\n        if (!err && value instanceof Blob) {\n          this.$router.push({\n            path: `/ebook/${this.bookItem.categoryText}|${this.bookItem.fileName}`,\n            query: {\n              navigation: item.href,\n            },\n          });\n        } else {\n          // this.showToast(this.$t('shelf.downloadFirst'))\n          this.$router.push({\n            path: `/ebook/${this.bookItem.categoryText}|${this.bookItem.fileName}`,\n            query: {\n              navigation: item.href,\n              opf: this.opf,\n            },\n          });\n        }\n      });\n    },\n    itemStyle(item) {\n      return {\n        marginLeft: (item.deep - 1) * px2rem(20) + \"rem\",\n      };\n    },\n    doFlatNavigation(content, deep = 1) {\n      const arr = [];\n      content.forEach((item) => {\n        item.deep = deep;\n        arr.push(item);\n        if (item.subitems && item.subitems.length > 0) {\n          arr.push(this.doFlatNavigation(item.subitems, deep + 1));\n        }\n      });\n      return arr;\n    },\n    initBook() {\n      if (this.bookItem) {\n        getLocalForage(this.bookItem.fileName, (err, blob) => {\n          if (err) {\n            this.downloadBook();\n          } else {\n            if (blob) {\n              this.parseBook(blob);\n            } else {\n              this.downloadBook();\n            }\n          }\n        });\n      }\n    },\n    downloadBook() {\n      const opf = `${process.env.VUE_APP_EPUB_URL}/${this.bookItem.categoryText}/${this.bookItem.fileName}/OEBPS/package.opf`;\n      this.parseBook(opf);\n    },\n    parseBook(blob) {\n      this.book = new Epub(blob);\n      this.book.loaded.metadata.then((metadata) => {\n        this.metadata = metadata;\n      });\n      this.book.loaded.navigation.then((nav) => {\n        this.navigation = nav;\n        if (this.navigation.toc && this.navigation.toc.length > 1) {\n          this.display(this.navigation.toc[1].href).then((section) => {\n            if (this.$refs.scroll) {\n              this.$refs.scroll.refresh();\n            }\n            this.displayed = true;\n            const reg = new RegExp(\"<.+?>\", \"g\");\n            const text = section.output.replace(reg, \"\").replace(/\\s\\s/g, \"\");\n            this.description = text;\n          });\n        }\n      });\n    },\n    init() {\n      const fileName = this.$route.query.fileName;\n      this.categoryText = this.$route.query.category;\n      if (fileName) {\n        detail(fileName).then((response) => {\n          if (\n            response.status === 200 &&\n            response.data.error_code === 0 &&\n            response.data.data\n          ) {\n            const data = response.data.data;\n            this.bookItem = data;\n            this.cover = this.bookItem.cover;\n            let rootFile = data.rootFile;\n            if (rootFile.startsWith(\"/\")) {\n              rootFile = rootFile.substring(1, rootFile.length);\n            }\n            this.opf = `${process.env.VUE_APP_EPUB_OPF_URL}/${fileName}/${rootFile}`;\n            this.parseBook(this.opf);\n          } else {\n            this.showToast(response.data.msg);\n          }\n        });\n      }\n      this.bookShelf = getLocalStorage(\"bookShelf\");\n    },\n    display(location) {\n      if (this.$refs.preview) {\n        if (!this.rendition) {\n          this.rendition = this.book.renderTo(\"preview\", {\n            width: window.innerWidth > 640 ? 640 : window.innerWidth,\n            height: window.innerHeight,\n            method: \"default\",\n          });\n        }\n        if (!location) {\n          return this.rendition.display();\n        } else {\n          return this.rendition.display(location);\n        }\n      }\n    },\n    onScroll(offsetY) {\n      if (offsetY > realPx(42)) {\n        this.$refs.title.showShadow();\n      } else {\n        this.$refs.title.hideShadow();\n      }\n    },\n  },\n  mounted() {\n    this.init();\n    if (!this.shelfList || this.shelfList.length === 0) {\n      this.getShelfList();\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\" rel=\"stylesheet/scss\" scoped>\n@import \"../../assets/styles/global\";\n\n.book-detail {\n  width: 100%;\n  background: white;\n  .content-wrapper {\n    width: 100%;\n    .book-detail-content-wrapper {\n      width: 100%;\n      border-bottom: px2rem(1) solid #eee;\n      box-sizing: border-box;\n      .book-detail-content-title {\n        font-size: px2rem(20);\n        font-weight: bold;\n        padding: px2rem(20) px2rem(15) px2rem(10) px2rem(15);\n        box-sizing: border-box;\n      }\n      .book-detail-content-list-wrapper {\n        padding: px2rem(10) px2rem(15);\n        box-sizing: border-box;\n        .loading-text-wrapper {\n          width: 100%;\n          .loading-text {\n            font-size: px2rem(14);\n            color: #666;\n          }\n        }\n        .book-detail-content-row {\n          display: flex;\n          box-sizing: border-box;\n          margin-bottom: px2rem(10);\n          .book-detail-content-label {\n            flex: 0 0 px2rem(70);\n            font-size: px2rem(14);\n            color: #666;\n          }\n          .book-detail-content-text {\n            flex: 1;\n            font-size: px2rem(14);\n            color: #333;\n          }\n        }\n        .book-detail-content-item-wrapper {\n          .book-detail-content-item {\n            padding: px2rem(15) 0;\n            font-size: px2rem(14);\n            line-height: px2rem(16);\n            color: #666;\n            border-bottom: px2rem(1) solid #eee;\n            &:last-child {\n              border-bottom: none;\n            }\n            .book-detail-content-navigation-text {\n              width: 100%;\n              @include ellipsis;\n              &.is-sub {\n                color: #666;\n              }\n            }\n          }\n        }\n      }\n    }\n    .audio-wrapper {\n      width: 100%;\n      padding: px2rem(15);\n      box-sizing: border-box;\n      #audio {\n        width: 100%;\n      }\n    }\n  }\n  .bottom-wrapper {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: 120;\n    display: flex;\n    width: 100%;\n    height: px2rem(52);\n    box-shadow: 0 px2rem(-2) px2rem(2) rgba(0, 0, 0, 0.1);\n    .bottom-btn {\n      flex: 1;\n      color: $color-blue;\n      font-weight: bold;\n      font-size: px2rem(14);\n      @include center;\n      &:active {\n        color: $color-blue-transparent;\n      }\n      .icon-check {\n        margin-right: px2rem(5);\n      }\n    }\n    &.hide-shadow {\n      box-shadow: none;\n    }\n  }\n}\n</style>\n","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n"],"sourceRoot":""}