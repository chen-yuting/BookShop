(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36aa1f91","chunk-5ca1f56b"],{"28a5":function(t,e,i){"use strict";var s=i("aae3"),n=i("cb7c"),o=i("ebd6"),a=i("0390"),r=i("9def"),c=i("5f1b"),l=i("520a"),u=i("79e5"),h=Math.min,f=[].push,d="split",m="length",p="lastIndex",v=4294967295,b=!u((function(){RegExp(v,"y")}));i("214f")("split",2,(function(t,e,i,u){var k;return k="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[m]||2!="ab"[d](/(?:ab)*/)[m]||4!="."[d](/(.?)(.?)/)[m]||"."[d](/()()/)[m]>1||""[d](/.?/)[m]?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!s(t))return i.call(n,t,e);var o,a,r,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?v:e>>>0,b=new RegExp(t.source,u+"g");while(o=l.call(b,n)){if(a=b[p],a>h&&(c.push(n.slice(h,o.index)),o[m]>1&&o.index<n[m]&&f.apply(c,o.slice(1)),r=o[0][m],h=a,c[m]>=d))break;b[p]===o.index&&b[p]++}return h===n[m]?!r&&b.test("")||c.push(""):c.push(n.slice(h)),c[m]>d?c.slice(0,d):c}:"0"[d](void 0,0)[m]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,s){var n=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,n,s):k.call(String(n),i,s)},function(t,e){var s=u(k,t,this,e,k!==i);if(s.done)return s.value;var l=n(t),f=String(this),d=o(l,RegExp),m=l.unicode,p=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(b?"y":"g"),g=new d(b?l:"^(?:"+l.source+")",p),x=void 0===e?v:e>>>0;if(0===x)return[];if(0===f.length)return null===c(g,f)?[f]:[];var y=0,C=0,w=[];while(C<f.length){g.lastIndex=b?C:0;var S,_=c(g,b?f:f.slice(C));if(null===_||(S=h(r(g.lastIndex+(b?0:C)),f.length))===y)C=a(f,C,m);else{if(w.push(f.slice(y,C)),w.length===x)return w;for(var T=1;T<=_.length-1;T++)if(w.push(_[T]),w.length===x)return w;C=y=S}}return w.push(f.slice(y)),w}]}))},"37a1":function(t,e,i){"use strict";var s=i("759b"),n=i.n(s);n.a},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"385c":function(t,e,i){"use strict";(function(t){i("4917"),i("d25f"),i("5df3"),i("ac6a"),i("f3e2"),i("7f7f"),i("28a5");var s=i("a211"),n=i("ac0d"),o=i("e8ec"),a=i("5de6"),r=i("101f");t.ePub=s["a"],e["a"]={mixins:[n["a"]],mounted:function(){var t=this,e=this.$route.params.fileName.split("|"),i=e[1];Object(r["b"])(i,(function(i,s){!i&&s?(console.log("找到离线缓存电子书"),t.setFileName(e.join("/")).then((function(){t.initEpub(s)}))):(console.log("在线获取电子书"),t.setFileName(e.join("/")).then((function(){var e="".concat("http://47.99.166.157/epub","/")+t.fileName+".epub";t.initEpub(e)})))}))},methods:{prevPage:function(){var t=this;this.rendition&&(this.rendition.prev().then((function(){t.refreshLocation()})),this.hideTitleAndMenu())},nextPage:function(){var t=this;this.rendition&&(this.rendition.next().then((function(){t.refreshLocation()})),this.hideTitleAndMenu())},toggleTitleAndMenu:function(){this.setMenuVisible(!this.menuVisible),this.setSettingVisible(-1),this.setFontFamilyVisible(!1)},initFontFamily:function(){var t=Object(o["d"])(this.fileName);t?(this.rendition.themes.font(t),this.setDefaultFontFamily(t)):Object(o["n"])(this.fileName,this.defaultFontFamily)},initFontSize:function(){var t=Object(o["e"])(this.fileName);t?(this.rendition.themes.fontSize(t+"px"),this.setDefaultFontSize(t)):Object(o["o"])(this.fileName,this.defaultFontSize)},initTheme:function(){var t=this,e=Object(o["j"])(this.fileName);e||(e=this.themeList[0].name,Object(o["s"])(this.fileName,e)),this.setDefaultTheme(e),this.themeList.forEach((function(e){t.rendition.themes.register(e.name,e.style)})),this.rendition.themes.select(e)},initRendition:function(){var t=this;this.rendition=this.book.renderTo("read",{width:window.innerWidth,height:window.innerHeight,method:"default"});var e=Object(o["h"])(this.fileName);e?this.display(e,(function(){t.initFontSize(),t.initFontFamily(),t.initTheme(),t.initGlobalStyle()})):this.display(null,(function(){t.initFontSize(),t.initFontFamily(),t.initTheme(),t.initGlobalStyle()})),this.rendition.hooks.content.register((function(t){Promise.all([t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/daysOne.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/montserrat.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/tangerine.css")),t.addStylesheet("".concat("http://47.99.166.157/book/res","/fonts/cabin.css"))]).then((function(){}))}))},initGesture:function(){var t=this;this.rendition.on("touchstart",(function(e){t.touchStartX=e.changedTouches[0].clientX,t.touchStartTime=e.timeStamp})),this.rendition.on("touchend",(function(e){t.touchEndX=e.changedTouches[0].clientX,t.touchEndTime=e.timeStamp;var i=t.touchEndX-t.touchStartX,s=t.touchEndTime-t.touchStartTime;s<500&&i>40?t.prevPage():s<500&&i<-40?t.nextPage():t.toggleTitleAndMenu(),e.stopPropagation()})),this.rendition.on("touchmove",(function(t){}))},onMaskClick:function(t){if(!this.mouseState||2!=this.mouseState&&3!=this.mouseState){var e=t.offsetX,i=window.innerWidth;e>0&&e<.3*i?this.prevPage():e>0&&e>.7*i?this.nextPage():this.toggleTitleAndMenu()}},move:function(t){var e=0;this.firstOffsetY?(e=t.changedTouches[0].clientY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.changedTouches[0].clientY,t.preventDefault(),t.stopPropagation()},moveEnd:function(t){this.setOffsetY(0),this.firstOffsetY=null},onMouseEnter:function(t){this.mouseState=1,this.mouseStartTime=t.timeStamp,t.preventDefault(),t.stopPropagation()},onMouseMove:function(t){if(1==this.mouseState)this.mouseState=2;else if(2==this.mouseState){var e=0;this.firstOffsetY?(e=t.clientY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.clientY}t.preventDefault(),t.stopPropagation()},onMouseEnd:function(t){2==this.mouseState?(this.setOffsetY(0),this.firstOffsetY=null,this.mouseState=3):this.mouseState=4;var e=t.timeStamp-this.mouseStartTime;e<100&&(this.mouseState=4),t.preventDefault(),t.stopPropagation()},parseBook:function(){var t=this;this.book.loaded.cover.then((function(e){t.book.archive.createUrl(e).then((function(e){t.setCover(e)})),t.book.loaded.metadata.then((function(e){t.setMetadata(e)})),t.book.loaded.navigation.then((function(e){var i=Object(a["d"])(e.toc);function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.parent?s(i.filter((function(e){return e.id==t.parent}))[0],++e):e}i.forEach((function(t){t.level=s(t)})),t.setNavigation(i)}))}))},initEpub:function(t){var e=this;this.book=new s["a"](t),this.setCurrentBook(this.book),this.initRendition(),this.initGesture(),this.parseBook(),this.book.ready.then((function(){return e.book.locations.generate(window.innerWidth/375*750*Object(o["e"])(e.fileName)/16)})).then((function(t){e.navigation.forEach((function(t){t.pagelist=[]})),t.forEach((function(t){var i=t.match(/\[(.*)\]!/)[1];e.navigation.forEach((function(e){if(e.href){var s=e.href.match(/^(.*)\.html$/);s&&s[1]==i&&e.pagelist.push(t)}}));var s=1;e.navigation.forEach((function(t,e){t.page=0==e?1:s,s+=t.pagelist.length}))})),e.setBookAvailable(!0),e.refreshLocation()}))}}}}).call(this,i("c8ba"))},"38ac":function(t,e,i){},"3c1c":function(t,e,i){"use strict";var s=i("4f0d"),n=i.n(s);n.a},"3d99":function(t,e,i){},"42f2":function(t,e,i){"use strict";var s=i("3d99"),n=i.n(s);n.a},4917:function(t,e,i){"use strict";var s=i("cb7c"),n=i("9def"),o=i("0390"),a=i("5f1b");i("214f")("match",1,(function(t,e,i,r){return[function(i){var s=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,s):new RegExp(i)[e](String(s))},function(t){var e=r(i,t,this);if(e.done)return e.value;var c=s(t),l=String(this);if(!c.global)return a(c,l);var u=c.unicode;c.lastIndex=0;var h,f=[],d=0;while(null!==(h=a(c,l))){var m=String(h[0]);f[d]=m,""===m&&(c.lastIndex=o(l,n(c.lastIndex),u)),d++}return 0===d?null:f}]}))},"4d76":function(t,e,i){},"4f0d":function(t,e,i){},5012:function(t,e,i){},5158:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-reader"},[i("div",{attrs:{id:"read"}}),i("div",{staticClass:"ebook-reader-mask",on:{click:t.onMaskClick,touchmove:t.move,touchend:t.moveEnd,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseEnter(e)},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseMove(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseEnd(e)}}})])},n=[],o=i("385c"),a=o["a"],r=(i("5f3f"),i("2877")),c=Object(r["a"])(a,s,n,!1,null,"c3011518",null);e["default"]=c.exports},"51a1":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"ebook",staticClass:"ebook"},[i("ebook-header"),i("ebook-reader"),i("ebook-title"),i("ebook-menu"),i("ebook-bookmark"),i("ebook-footer")],1)},n=[],o=i("5158"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"slide-down"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[i("div",{staticClass:"left"},[i("span",{staticClass:"icon-back icon",on:{click:function(e){return t.back()}}})]),i("div",{staticClass:"right"},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-shelf icon",on:{click:function(e){return t.showBookShelf()}}}),i("span",{staticClass:"icon-cart icon"}),i("span",{staticClass:"icon-more icon"})])])])])},r=[],c=i("ac0d"),l={mixins:[c["a"]],methods:{back:function(){this.$router.go(-1)},showBookShelf:function(){this.$router.push("/store/shelf")}}},u=l,h=(i("37a1"),i("2877")),f=Object(h["a"])(u,a,r,!1,null,"f10b42f8",null),d=f.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[i("div",{staticClass:"icon-wrapper"},[i("span",{staticClass:"icon-menu icon",on:{click:function(e){return t.showSetting(3)}}}),i("span",{staticClass:"icon-progress icon",on:{click:function(e){return t.showSetting(2)}}}),i("span",{staticClass:"icon-bright icon",on:{click:function(e){return t.showSetting(1)}}}),i("span",{staticClass:"icon-A icon",on:{click:function(e){return t.showSetting(0)}}})])])]),i("ebook-setting-font"),i("ebook-setting-font-popup"),i("ebook-setting-theme"),i("ebook-setting-progress"),i("ebook-slide")],1)},p=[],v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0==t.settingVisible,expression:"menuVisible && settingVisible==0"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-font-size"},[i("div",{staticClass:"preview-min",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),i("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,s){return i("div",{key:s,staticClass:"select-wrapper",on:{click:function(i){return t.setFontSize(e.fontSize)}}},[i("div",{staticClass:"line"}),i("div",{staticClass:"point-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize==e.fontSize,expression:"defaultFontSize==item.fontSize"}],staticClass:"point"},[i("div",{staticClass:"small-point"})])]),i("div",{staticClass:"line"})])})),0),i("div",{staticClass:"preview-max",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])]),i("div",{staticClass:"setting-font-family",on:{click:function(e){return t.showFontFamilyPopup()}}},[i("div",{staticClass:"setting-font-family-text-wrapper"},[i("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),i("div",{staticClass:"setting-font-family-icon-wrapper"},[i("span",{staticClass:"icon-forward"})])])])])],1)},b=[],k=i("5de6"),g=i("e8ec"),x={mixins:[c["a"]],data:function(){return{fontSizeList:k["b"]}},methods:{setFontSize:function(t){this.setDefaultFontSize(t),Object(g["o"])(this.fileName,t),this.currentBook.rendition.themes.fontSize(t+"px")},showFontFamilyPopup:function(){this.setFontFamilyVisible(!0)}}},y=x,C=(i("db99"),Object(h["a"])(y,v,b,!1,null,"6c5a4b82",null)),w=C.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"popup-slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"ebook-popup-list"},[i("div",{staticClass:"ebook-popup-title"},[i("div",{staticClass:"ebook-popup-title-icon",on:{click:function(e){return t.hiden()}}},[i("span",{staticClass:"icon-down2"})]),i("span",{staticClass:"ebook-popup-title-text"},[t._v(t._s(t.$t("book.selectFont")))])]),i("div",{staticClass:"ebook-popup-list-wrapper"},t._l(t.fontFamilyList,(function(e,s){return i("div",{key:s,staticClass:"ebook-popup-item",on:{click:function(i){return t.setFontFamily(e.font)}}},[i("div",{staticClass:"ebook-popup-item-text",class:{selected:t.isSelected(e)}},[t._v(t._s(e.font))]),t.isSelected(e)?i("div",{staticClass:"ebook-popup-item-check"},[i("span",{staticClass:"icon-check"})]):t._e()])})),0)])])},_=[],T={mixins:[c["a"]],data:function(){return{fontFamilyList:k["a"]}},methods:{setFontFamily:function(t){this.setDefaultFontFamily(t),Object(g["n"])(this.fileName,t),"Default"==t?this.currentBook.rendition.themes.font("Times New Roman"):this.currentBook.rendition.themes.font(t)},isSelected:function(t){return this.defaultFontFamily==t.font},hiden:function(){this.setFontFamilyVisible(!1)}}},O=T,F=(i("877c"),Object(h["a"])(O,S,_,!1,null,"5a6c7216",null)),E=F.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1==t.settingVisible,expression:"menuVisible && settingVisible==1"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,s){return i("div",{key:s,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(s)}}},[i("div",{staticClass:"preview",class:{selected:e.name==t.defaultTheme},style:{background:e.style.body.background}}),i("div",{staticClass:"text",class:{selected:e.name==t.defaultTheme}},[t._v(t._s(e.alias))])])})),0)])])],1)},$=[],N=(i("7f7f"),{mixins:[c["a"]],methods:{setTheme:function(t){var e=this,i=this.themeList[t];this.setDefaultTheme(i.name).then((function(){e.currentBook.rendition.themes.select(e.defaultTheme)})),this.initGlobalStyle(),Object(g["s"])(this.fileName,this.defaultTheme)}}}),V=N,P=(i("fd9b"),Object(h["a"])(V,j,$,!1,null,"3d6fd3fc",null)),B=P.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slide-up"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2==t.settingVisible,expression:"menuVisible && settingVisible==2"}],staticClass:"setting-wrapper"},[i("div",{staticClass:"setting-progress"},[i("div",{staticClass:"read-time-wrapper"},[i("span",{staticClass:"read-time-text"},[t._v(t._s(t.getReadTimeText()))]),i("span",{staticClass:"icon-forward"})]),i("div",{staticClass:"progress-wrapper"},[i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[i("span",{staticClass:"icon-back"})]),i("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!this.bookAvailable},domProps:{value:this.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),i("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[i("span",{staticClass:"icon-forward"})])]),i("div",{staticClass:"text-wrapper"},[i("span",{staticClass:"progress-section-text"},[t._v(t._s(t.getSectionName))]),i("span",[t._v("("+t._s(this.bookAvailable?t.progress+"%":"加载中...")+")")])])])])])],1)},M=[],z={mixins:[c["a"]],methods:{onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress()}))},onProgressInput:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress()}))},displayProgress:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then((function(){t.displaySection()}))},nextSection:function(){var t=this;this.section<this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then((function(){t.displaySection()}))},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)},updateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")}},updated:function(){this.updateProgressBg()}},A=z,D=(i("ef7e"),Object(h["a"])(A,L,M,!1,null,"138b9f42",null)),I=D.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&3==t.settingVisible,expression:"menuVisible && settingVisible==3"}],staticClass:"slide-content-wrapper"},[i("transition",{attrs:{name:"slide-right"}},[3==t.settingVisible?i("div",{staticClass:"content"},[t.bookAvailable?i("div",{staticClass:"content-page-wrapper"},[i("div",{staticClass:"content-page"},[i(1==t.currentTab?t.content:t.bookmark,{tag:"component"})],1),i("div",{staticClass:"content-page-tab"},[i("div",{staticClass:"content-page-tab-item",class:{selected:1==t.currentTab},on:{click:function(e){return t.selectTab(1)}}},[t._v(t._s(t.$t("book.navigation")))]),i("div",{staticClass:"content-page-tab-item",class:{selected:2==t.currentTab},on:{click:function(e){return t.selectTab(2)}}},[t._v(t._s(t.$t("book.bookmark")))])])]):i("div",{staticClass:"content-empty"},[i("ebook-loading")],1)]):t._e()]),i("div",{staticClass:"content-bg",on:{click:function(e){return t.hideTitleAndMenu()}}})],1)])},R=[],W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-slide-contents"},[i("div",{staticClass:"slide-contents-search-wrapper"},[i("div",{staticClass:"slide-contents-search-input-wrapper"},[t._m(0),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.search()},click:function(e){return t.showSearchPage()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?i("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v(t._s(t.$t("book.cancel")))]):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[i("div",{staticClass:"slide-contents-book-img-wrapper"},[i("img",{staticClass:"slide-contents-book-img",attrs:{src:t.cover}})]),i("div",{staticClass:"slide-contents-book-info-wrapper"},[i("div",{staticClass:"slide-contents-book-title"},[i("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata.title))])]),i("div",{staticClass:"slide-contents-book-author"},[i("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata.creator))])])]),i("div",{staticClass:"slide-contents-book-progress-wrapper"},[i("div",{staticClass:"slide-contents-book-progress"},[i("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))]),i("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))])]),i("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadTimeText()))])])]),i("scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],ref:"scroll",staticClass:"slide-contents-list",attrs:{top:156,bottom:48}},t._l(t.navigation,(function(e,s){return i("div",{key:s,staticClass:"slide-contents-item"},[i("span",{staticClass:"slide-contents-item-label",class:{selected:t.section==s},style:t.contentItemStyle(e),on:{click:function(i){return t.displayContent(e.href)}}},[t._v(t._s(e.label))])])})),0),i("scroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,(function(e,s){return i("div",{key:s,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(i){return t.displayContent(e.cfi,!0)}}})})),0)],1)},H=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slide-contents-search-icon"},[i("span",{staticClass:"icon-search"})])}],X=(i("a481"),i("7514"),i("d92a"),i("6d67"),i("ac6a"),i("5df3"),i("fa7d")),G=i("6701"),K={mixins:[c["a"]],components:{Scroll:G["a"]},data:function(){return{searchVisible:!1,searchList:null,searchText:null}},methods:{showSearchPage:function(){this.searchVisible=!0},hideSearchPage:function(){this.searchVisible=!1,this.searchText="",this.searchList=null},contentItemStyle:function(t){return{marginLeft:"".concat(Object(X["a"])(15*t.level),"rem")}},displayContent:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.display(t,(function(){e.hideTitleAndMenu(),i&&e.currentBook.rendition.annotations.highlight(t)}))},doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map((function(i){return i.load(e.currentBook.load.bind(e.currentBook)).then(i.find.bind(i,t)).finally(i.unload.bind(i))}))).then((function(t){return Promise.resolve([].concat.apply([],t))}))},search:function(){var t=this;this.searchText&&this.searchText.length>0&&this.doSearch(this.searchText).then((function(e){t.searchList=e,t.searchList.map((function(e){return e.excerpt=e.excerpt.replace(t.searchText,'<span class="content-search-text">'.concat(t.searchText,"</span>")),e}))}))}}},J=K,U=(i("8a6b"),Object(h["a"])(J,W,H,!1,null,"2e6895ba",null)),q=U.exports,Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-slide-bookmark"},[i("div",{staticClass:"slide-bookmark-title"},[t._v(t._s(t.$t("book.bookmark"))+" · "+t._s(t.bookmark?t.bookmark.length:0))]),i("scroll",{staticClass:"slide-bookmark-list",attrs:{top:48,bottom:48}},t._l(t.bookmark,(function(e,s){return i("div",{key:s,staticClass:"slide-bookmark-item",on:{click:function(i){return t.displayBookmark(e.cfi)}}},[i("div",{staticClass:"slide-bookmark-item-icon"},[i("div",{staticClass:"icon-bookmark"})]),i("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])})),0)],1)},Z=[],tt={mixins:[c["a"]],components:{Scroll:G["a"]},data:function(){return{bookmark:null}},mounted:function(){this.bookmark=Object(g["c"])(this.fileName)},methods:{displayBookmark:function(t){var e=this;this.display(t,(function(){e.hideTitleAndMenu()}))}}},et=tt,it=(i("9747"),Object(h["a"])(et,Q,Z,!1,null,"30818a61",null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-loading"},[i("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,(function(e,s){return i("div",{key:s,staticClass:"ebook-loading-item"},t._l(e,(function(t,e){return i("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[i("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),i("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])})),0)})),i("div",{staticClass:"ebook-loading-center"})],2)])},ot=[],at=(i("f3e2"),{data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},methods:{},mounted:function(){var t=this;this.task=setInterval((function(){t.$refs.mask.forEach((function(e,i){var s=t.$refs.mask[i],n=t.$refs.line[i],o=t.maskWidth[i],a=t.lineWidth[i];if(0===i)t.add&&o.value<16?(o.value++,a.value--):!t.add&&a.value<16&&(o.value--,a.value++);else if(t.add&&o.value<16){var r=t.maskWidth[i-1];r.value>=8&&(o.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[i-1];c.value>=8&&(o.value--,a.value++)}s.style.width="".concat(Object(X["a"])(o.value),"rem"),s.style.flex="0 0 ".concat(Object(X["a"])(o.value),"rem"),n.style.width="".concat(Object(X["a"])(a.value),"rem"),n.style.flex="0 0 ".concat(Object(X["a"])(a.value),"rem"),i===t.maskWidth.length-1&&(t.add?16===o.value&&(t.end=!0):0===o.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)}))}),20)},beforeDestroy:function(){this.task&&clearInterval(this.task)}}),rt=at,ct=(i("6f90"),Object(h["a"])(rt,nt,ot,!1,null,"397d4eba",null)),lt=ct.exports,ut={mixins:[c["a"]],components:{EbookLoading:lt},data:function(){return{currentTab:1,content:q,bookmark:st}},methods:{selectTab:function(t){this.currentTab=t}}},ht=ut,ft=(i("b23e"),Object(h["a"])(ht,Y,R,!1,null,"84044fb4",null)),dt=ft.exports,mt={mixins:[c["a"]],components:{EbookSettingFont:w,EbookSettingFontPopup:E,EbookSettingTheme:B,EbookSettingProgress:I,EbookSlide:dt},methods:{showSetting:function(t){this.setSettingVisible(t)}}},pt=mt,vt=(i("d151"),Object(h["a"])(pt,m,p,!1,null,"6b264289",null)),bt=vt.exports,kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"mask"}),i("div",{ref:"bookmark",staticClass:"ebook-bookmark"},[i("div",{staticClass:"ebook-bookmark-text-wrapper"},[i("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[i("span",{staticClass:"icon-down"})]),i("div",{staticClass:"ebook-bookmark-text"},[t._v(t._s(t.text))])]),i("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.isFixed?t.fixedStyle:{}},[i("bookmark",{attrs:{color:t.color,width:15,height:35}})],1)])])},gt=[],xt=(i("d25f"),i("6b54"),i("87b3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"bookmark",staticClass:"bookmark",style:t.style})}),yt=[],Ct=(i("c5f6"),{props:{width:Number,height:Number,color:String},computed:{style:function(){return this.color?{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}:{}}},methods:{refresh:function(){this.height&&this.width&&(this.$refs.bookmark.style.borderWidth="".concat(Object(X["a"])(this.height-5),"rem ").concat(Object(X["a"])(this.width/2),"rem ").concat(Object(X["a"])(5),"rem ").concat(Object(X["a"])(this.width/2),"rem"))}},mounted:function(){this.refresh()}}),wt=Ct,St=(i("67d1"),Object(h["a"])(wt,xt,yt,!1,null,"1b12f53b",null)),_t=St.exports,Tt="#346cbc",Ot="#fff",Ft={mixins:[c["a"]],components:{Bookmark:_t},computed:{height:function(){return Object(X["b"])(35)},threshold:function(){return Object(X["b"])(55)},fixedStyle:function(){return{position:"fixed",top:0,right:"".concat((window.innerWidth-this.$refs.bookmark.clientWidth)/2,"px")}}},data:function(){return{text:"",color:Ot,isFixed:null}},watch:{offsetY:function(t){!this.bookAvailable||this.menuVisible||this.settingVisible>=0||(t>=this.height&&t<=this.threshold?this.beforeThreshold(t):t>this.threshold?this.afterThreshold(t):t>0&&t<this.height?this.beforeHeight():0==t&&this.restore())},isBookmark:function(t){this.isFixed=t,this.color=t?Tt:Ot}},methods:{beforeThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.beforeHeight();var e=this.$refs.iconDown;"rotate(180deg)"==e.style.transform&&(e.style.transform=""),this.isFixed=!1},afterThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=Ot,this.isFixed=!1):(this.text=this.$t("book.releaseAddMark"),this.color=Tt,this.isFixed=!0);var e=this.$refs.iconDown;""==e.style.transform&&(e.style.transform="rotate(180deg)")},beforeHeight:function(){this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=Tt,this.isFixed=!0):(this.text=this.$t("book.pulldownAddMark"),this.color=Ot,this.isFixed=!1)},restore:function(){var t=this;setTimeout((function(){t.$refs.bookmark.style.top="".concat(-t.height,"px"),t.$refs.iconDown.style.transform=""}),200),this.isFixed?(this.setIsBookmark(!0),this.addBookmark()):(this.setIsBookmark(!1),this.removeBookmark())},addBookmark:function(){var t=this;this.bookmark=Object(g["c"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),i=e.start.cfi.replace(/!.*/,""),s=e.start.cfi.replace(/.*!/,"").replace(/\)$/,""),n=e.end.cfi.replace(/.*!/,"").replace(/\)$/,""),o="".concat(i,"!,").concat(s,",").concat(n,")");this.currentBook.getRange(o).then((function(i){var s=i.toString().replace(/\s\s/g,"");t.bookmark.push({cfi:e.start.cfi,text:s}),Object(g["m"])(t.fileName,t.bookmark)}))},removeBookmark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;this.bookmark=Object(g["c"])(this.fileName),this.bookmark&&(this.bookmark=this.bookmark.filter((function(t){return t.cfi!=e})),Object(g["m"])(this.fileName,this.bookmark),this.setIsBookmark(!1))}}},Et=Ft,jt=(i("3c1c"),Object(h["a"])(Et,kt,gt,!1,null,"2df5372b",null)),$t=jt.exports,Nt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-header"},[i("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},Vt=[],Pt={mixins:[c["a"]]},Bt=Pt,Lt=(i("9c0b"),Object(h["a"])(Bt,Nt,Vt,!1,null,"78de4592",null)),Mt=Lt.exports,zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ebook-footer"},[i("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.progress+"%"))])])},At=[],Dt={mixins:[c["a"]]},It=Dt,Yt=(i("5cda"),Object(h["a"])(It,zt,At,!1,null,"17970556",null)),Rt=Yt.exports,Wt={mixins:[c["a"]],components:{EbookReader:o["default"],EbookTitle:d,EbookMenu:bt,EbookBookmark:$t,EbookHeader:Mt,EbookFooter:Rt},watch:{offsetY:function(t){!this.menuVisible&&this.bookAvailable&&(t>0?this.move(t):0==t&&this.restore())}},methods:{move:function(t){this.$refs.ebook.style.top=t+"px"},restore:function(){var t=this;this.$refs.ebook.style.top="0px",this.$refs.ebook.style.transition="all 0.2s linear",setTimeout((function(){t.$refs.ebook.style.transition=""}),200)},startLoopReadTime:function(){var t=this,e=Object(g["i"])(this.fileName);e||(e=0),this.task=setInterval((function(){e++,e%30==0&&Object(g["r"])(t.fileName,e)}),1e3)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)}},Ht=Wt,Xt=(i("9fc5"),Object(h["a"])(Ht,s,n,!1,null,"20e4d6df",null));e["default"]=Xt.exports},"5cda":function(t,e,i){"use strict";var s=i("38ac"),n=i.n(s);n.a},"5df3":function(t,e,i){"use strict";var s=i("02f4")(!0);i("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=s(e,i),this._i+=t.length,{value:t,done:!1})}))},"5f3f":function(t,e,i){"use strict";var s=i("c7fa"),n=i.n(s);n.a},6701:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)},n=[],o=(i("c5f6"),i("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1},initPosition:{type:Object,default:function(){return{x:0,y:0}}}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(o["b"])(this.top)-Object(o["b"])(this.bottom)+"px",this.$refs.scrollWrapper.addEventListener("scroll",this.handleScroll))}},mounted:function(){var t=this;this.refresh(),this.$nextTick((function(){setTimeout((function(){t.scrollTo(Object(o["b"])(t.initPosition.x),Object(o["b"])(t.initPosition.y))}),1)}))}},r=a,c=(i("42f2"),i("2877")),l=Object(c["a"])(r,s,n,!1,null,"26a5f1a6",null);e["a"]=l.exports},"674c":function(t,e,i){},"67d1":function(t,e,i){"use strict";var s=i("4d76"),n=i.n(s);n.a},"6b54":function(t,e,i){"use strict";i("3846");var s=i("cb7c"),n=i("0bfb"),o=i("9e1e"),a="toString",r=/./[a],c=function(t){i("2aba")(RegExp.prototype,a,t,!0)};i("79e5")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?c((function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?n.call(t):void 0)})):r.name!=a&&c((function(){return r.call(this)}))},"6f90":function(t,e,i){"use strict";var s=i("9912"),n=i.n(s);n.a},7171:function(t,e,i){},"759b":function(t,e,i){},"79b7":function(t,e,i){},"7f7f":function(t,e,i){var s=i("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in n||i("9e1e")&&s(n,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"877c":function(t,e,i){"use strict";var s=i("95cb"),n=i.n(s);n.a},"87b3":function(t,e,i){var s=Date.prototype,n="Invalid Date",o="toString",a=s[o],r=s.getTime;new Date(NaN)+""!=n&&i("2aba")(s,o,(function(){var t=r.call(this);return t===t?a.call(this):n}))},"8a6b":function(t,e,i){"use strict";var s=i("a7a8"),n=i.n(s);n.a},"95cb":function(t,e,i){},9747:function(t,e,i){"use strict";var s=i("674c"),n=i.n(s);n.a},9912:function(t,e,i){},"9c0b":function(t,e,i){"use strict";var s=i("fd25"),n=i.n(s);n.a},"9fc5":function(t,e,i){"use strict";var s=i("c09d"),n=i.n(s);n.a},a7a8:function(t,e,i){},aae3:function(t,e,i){var s=i("d3f4"),n=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==n(t))}},b23e:function(t,e,i){"use strict";var s=i("ff55"),n=i.n(s);n.a},c09d:function(t,e,i){},c7fa:function(t,e,i){},d151:function(t,e,i){"use strict";var s=i("79b7"),n=i.n(s);n.a},d92a:function(t,e,i){var s=i("5ca1");s(s.P,"Function",{bind:i("f0c1")})},db99:function(t,e,i){"use strict";var s=i("7171"),n=i.n(s);n.a},ebb8:function(t,e,i){},ef7e:function(t,e,i){"use strict";var s=i("5012"),n=i.n(s);n.a},f0c1:function(t,e,i){"use strict";var s=i("d8e8"),n=i("d3f4"),o=i("31f4"),a=[].slice,r={},c=function(t,e,i){if(!(e in r)){for(var s=[],n=0;n<e;n++)s[n]="a["+n+"]";r[e]=Function("F,a","return new F("+s.join(",")+")")}return r[e](t,i)};t.exports=Function.bind||function(t){var e=s(this),i=a.call(arguments,1),r=function(){var s=i.concat(a.call(arguments));return this instanceof r?c(e,s.length,s):o(e,s,t)};return n(e.prototype)&&(r.prototype=e.prototype),r}},fd25:function(t,e,i){},fd9b:function(t,e,i){"use strict";var s=i("ebb8"),n=i.n(s);n.a},ff55:function(t,e,i){}}]);
//# sourceMappingURL=chunk-36aa1f91.e43e1792.js.map